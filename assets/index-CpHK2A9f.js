(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();window.currentLang="en";const c=["en","fr","de","es","pt","zh","ja"],i="i18n-cache",u=10*60*1e3;function m(e){window.translations=e,document.querySelectorAll("[data-i18n]").forEach(t=>{const o=t.getAttribute("data-i18n"),n=e[o];if(!n)return;/<\/?[a-z][\s\S]*>/i.test(n)||/&[a-z]+;/.test(n)?t.innerHTML=n:t.textContent=n}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const o=t.getAttribute("data-i18n-placeholder"),n=e[o];n&&t.setAttribute("placeholder",n)})}function g(e){try{const t=sessionStorage.getItem(i);if(!t)return null;const n=JSON.parse(t)[e];return!n||Date.now()-n.timestamp>u?null:n.translations}catch{return null}}function f(e,t){try{const o=sessionStorage.getItem(i),n=o?JSON.parse(o):{};n[e]={timestamp:Date.now(),translations:t},sessionStorage.setItem(i,JSON.stringify(n))}catch(o){console.warn(`Failed to cache translations for "${e}":`,o)}}window.addEventListener("beforeunload",()=>{sessionStorage.removeItem(i)});function h(e){document.querySelectorAll("[data-lang]").forEach(t=>{t.removeAttribute("data-selected"),t.getAttribute("data-lang")===e&&t.setAttribute("data-selected","true")})}async function d(e){try{localStorage.setItem("lang",e),document.documentElement.lang=e;let t=g(e);if(!t){const n=await fetch(`locales/${e}.json`);if(!n.ok)throw new Error(`HTTP ${n.status}`);t=await n.json(),f(e,t)}m(t),window.currentLang=e,document.title=t["website.title"]||document.title;const o=new URL(window.location);o.searchParams.set("lang",e),window.history.replaceState({},"",o),h(e)}catch(t){console.error(`Failed to load ${e} translations:`,t)}}async function p(){document.documentElement.setAttribute("data-loading","");const t=new URLSearchParams(window.location.search).get("lang"),o=localStorage.getItem("lang"),n=c.includes(t)?t:c.includes(o)?o:"en";await d(n),document.documentElement.removeAttribute("data-loading")}function y(){const e=document.querySelector(".hamburger"),t=document.querySelector("nav");!e||!t||e.addEventListener("click",()=>{const o=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!o),e.classList.toggle("active"),t.classList.toggle("active")})}function w(){const e=document.querySelector("header");e&&window.addEventListener("scroll",()=>{window.scrollY>10?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function b(e){const t=document.getElementById("lang-toggle"),o=document.getElementById("lang-menu");!t||!o||(t.addEventListener("click",()=>{const n=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!n),o.hidden=n}),o.querySelectorAll("button").forEach(n=>{n.addEventListener("click",async()=>{const r=n.getAttribute("data-lang");r&&await e(r),t.setAttribute("aria-expanded","false"),o.hidden=!0})}),document.addEventListener("click",n=>{!t.contains(n.target)&&!o.contains(n.target)&&(t.setAttribute("aria-expanded","false"),o.hidden=!0)}))}function L(){const e=document.getElementById("theme-toggle");if(!e)return;const t=e.querySelector(".icon-sun"),o=e.querySelector(".icon-moon");function n(a){!t||!o||(a==="dark"?(t.style.display="block",o.style.display="none",e.setAttribute("aria-pressed","true")):(t.style.display="none",o.style.display="block",e.setAttribute("aria-pressed","false")))}const r=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",r),n(r),e.addEventListener("click",()=>{const s=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),n(s)})}async function l(){try{const e=document.getElementById("download-mobile-app");if(!e)return;const o=`https://raw.githubusercontent.com/aelassas/movinin/main/.github/latest-release.json?t=${Date.now()}`,n=await fetch(o);if(!n.ok)throw new Error(`Failed to fetch latest release info: ${n.status} ${n.statusText}`);const r=await n.json();if(e.href===r.latestApkUrl)return;r.latestApkUrl&&(e.href=r.latestApkUrl)}catch(e){console.error(e);const t=document.getElementById("demo-mobile-app");t&&(t.style.display="none")}}function E(){"requestIdleCallback"in window?requestIdleCallback(l):setTimeout(l,100)}function A(){const e=document.getElementById("year");e&&(e.textContent=new Date().getFullYear())}window.addEventListener("DOMContentLoaded",async()=>{try{await p(),y(),w(),b(d),L(),E(),A()}catch(e){console.error("Error during app initialization:",e)}});
