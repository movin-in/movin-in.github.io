(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();window.currentLang="en";const l="/",s=["en","fr","es","pt","zh","ja"];function d(e){window.translations=e,document.querySelectorAll("[data-i18n]").forEach(t=>{const o=t.getAttribute("data-i18n");e[o]&&(t.textContent=e[o])}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const o=t.getAttribute("data-i18n-placeholder"),r=e[o];r&&t.setAttribute("placeholder",r)});const a=localStorage.getItem("lang")||"en";fetch(`${l}locales/${a}.json`).then(t=>t.json()).then(t=>{document.querySelectorAll("[data-i18n]").forEach(o=>{const r=o.getAttribute("data-i18n"),c=t[r];if(!c)return;/<\/?[a-z][\s\S]*>/i.test(c)?o.innerHTML=c:o.textContent=c})}).catch(t=>console.error(`Failed to load ${a} translations`,t))}function u(e){document.querySelectorAll("[data-lang]").forEach(n=>{n.removeAttribute("data-selected"),n.getAttribute("data-lang")===e&&n.setAttribute("data-selected","true")})}async function i(e){try{localStorage.setItem("lang",e),document.documentElement.lang=e;const n=await fetch(`locales/${e}.json`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=await n.json();d(a),window.currentLang=e,document.title=a["website.title"]||document.title;const t=new URL(window.location);t.searchParams.set("lang",e),window.history.replaceState({},"",t),u(e)}catch(n){console.error(`Failed to load ${e} translations:`,n)}}window.addEventListener("DOMContentLoaded",()=>{const n=new URLSearchParams(window.location.search).get("lang"),a=localStorage.getItem("lang"),t=s.includes(n)?n:s.includes(a)?a:"en";i(t)});function g(){const e=document.querySelector(".hamburger"),n=document.querySelector("nav");e.addEventListener("click",()=>{const a=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!a),e.classList.toggle("active"),n.classList.toggle("active")})}function m(){const e=document.querySelector("header");window.addEventListener("scroll",()=>{window.scrollY>10?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function h(e){const n=document.getElementById("lang-toggle"),a=document.getElementById("lang-menu");n.addEventListener("click",()=>{const t=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!t),a.hidden=t}),a.querySelectorAll("button").forEach(t=>{t.addEventListener("click",()=>{const o=t.getAttribute("data-lang");e(o),n.setAttribute("aria-expanded",!1),a.hidden=!0})}),document.addEventListener("click",t=>{!n.contains(t.target)&&!a.contains(t.target)&&(n.setAttribute("aria-expanded","false"),a.hidden=!0)})}function f(){const e=document.getElementById("theme-toggle"),n=e.querySelector(".icon-sun"),a=e.querySelector(".icon-moon");function t(r){r==="dark"?(n.style.display="block",a.style.display="none",e.setAttribute("aria-pressed","true")):(n.style.display="none",a.style.display="block",e.setAttribute("aria-pressed","false"))}const o=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",o),t(o),e.addEventListener("click",()=>{const c=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",c),localStorage.setItem("theme",c),t(c)})}async function p(){try{const n=`https://raw.githubusercontent.com/aelassas/movinin/main/.github/latest-release.json?t=${Date.now()}`,a=await fetch(n);if(!a.ok)throw new Error("Failed to fetch latest release info");const t=await a.json(),o=document.getElementById("download-mobile-app");o.href=t.latestApkUrl}catch(e){console.error(e),document.getElementById("demo-mobile-app").style.display="none"}}function y(){document.getElementById("year").textContent=new Date().getFullYear()}document.documentElement.setAttribute("data-loading","");async function w(){const n=new URLSearchParams(window.location.search).get("lang"),a=localStorage.getItem("lang"),t=s.includes(n)?n:s.includes(a)?a:"en";await i(t),document.documentElement.removeAttribute("data-loading")}window.addEventListener("DOMContentLoaded",async()=>{await w(),g(),m(),h(i),f(),p(),y()});
