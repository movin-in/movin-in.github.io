!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),function(e){let t=!1;const n=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("touchstart",n),(()=>{if(t)return;t=!0,window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)};const n=document.createElement("script");n.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,n.async=!0,n.onload=()=>{window.gtag("js",new Date),window.gtag("config",e)},document.head.appendChild(n)})()};window.addEventListener("mousemove",n,{once:!0,passive:!0}),window.addEventListener("touchstart",n,{once:!0,passive:!0})}("G-PZHVBZFNXT");window.currentLang="en";const e=["en","fr","de","es","pt","zh","ja"],t="i18n-cache";async function n(e){try{localStorage.setItem("lang",e),document.documentElement.lang=e;let n=function(e){try{const n=sessionStorage.getItem(t);if(!n)return null;const o=JSON.parse(n)[e];return o?Date.now()-o.timestamp>6e5?null:o.translations:null}catch{return null}}(e);if(!n){const o=await fetch(`/locales/${e}.json`);if(!o.ok)throw new Error(`HTTP ${o.status}`);n=await o.json(),function(e,n){try{const o=sessionStorage.getItem(t),a=o?JSON.parse(o):{};a[e]={timestamp:Date.now(),translations:n},sessionStorage.setItem(t,JSON.stringify(a))}catch(o){console.warn(`Failed to cache translations for "${e}":`,o)}}(e,n)}!function(e){window.translations=e,document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n"),o=e[n];o&&(/<\/?[a-z][\s\S]*>/i.test(o)||/&[a-z]+;/.test(o)?t.innerHTML=o:t.textContent=o)}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const n=t.getAttribute("data-i18n-placeholder"),o=e[n];o&&t.setAttribute("placeholder",o)})}(n),window.currentLang=e;const o=document.querySelector("title"),a=o?.getAttribute("data-i18n");o&&(a&&n[a]?o.textContent=n[a]:n["website.title"]&&(document.title=n["website.title"]));const r=new URL(window.location);r.searchParams.set("lang",e),window.history.replaceState({},"",r),function(e){document.querySelectorAll("[data-lang]").forEach(t=>{t.removeAttribute("data-selected"),t.getAttribute("data-lang")===e&&t.setAttribute("data-selected","true")})}(e)}catch(n){console.error(`Failed to load ${e} translations:`,n)}}async function o(){try{const e=document.getElementById("download-mobile-app");if(!e)return;const t=`${"https://raw.githubusercontent.com/aelassas/movinin/main/.github/latest-release.json"}?t=${Date.now()}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch latest release info: ${n.status} ${n.statusText}`);const o=await n.json();if(e.href===o.latestApkUrl)return;o.latestApkUrl&&(e.href=o.latestApkUrl)}catch(e){console.error(e);const t=document.getElementById("demo-mobile-app");t&&(t.style.display="none")}}window.addEventListener("beforeunload",()=>{sessionStorage.removeItem(t)}),window.addEventListener("DOMContentLoaded",async()=>{try{await async function(){document.documentElement.setAttribute("data-loading","");const t=new URLSearchParams(window.location.search).get("lang"),o=localStorage.getItem("lang"),a=e.includes(t)?t:e.includes(o)?o:"en";await n(a),document.documentElement.removeAttribute("data-loading")}(),function(){const e=document.querySelector(".hamburger"),t=document.querySelector("nav");e&&t&&e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),e.classList.toggle("active"),t.classList.toggle("active")})}(),function(){const e=document.querySelector("header");e&&window.addEventListener("scroll",()=>{window.scrollY>10?e.classList.add("scrolled"):e.classList.remove("scrolled")})}(),function(e){const t=document.getElementById("lang-toggle"),n=document.getElementById("lang-menu");t&&n&&(t.addEventListener("click",()=>{const e="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!e),n.hidden=e}),n.querySelectorAll("button").forEach(o=>{o.addEventListener("click",async()=>{const a=o.getAttribute("data-lang");a&&await e(a),t.setAttribute("aria-expanded","false"),n.hidden=!0})}),document.addEventListener("click",e=>{t.contains(e.target)||n.contains(e.target)||(t.setAttribute("aria-expanded","false"),n.hidden=!0)}))}(n),function(){const e=document.getElementById("theme-toggle");if(!e)return;const t=e.querySelector(".icon-sun"),n=e.querySelector(".icon-moon");function o(o){t&&n&&("dark"===o?(t.style.display="block",n.style.display="none",e.setAttribute("aria-pressed","true")):(t.style.display="none",n.style.display="block",e.setAttribute("aria-pressed","false")))}const a=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",a),o(a),e.addEventListener("click",()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),o(e)})}(),"requestIdleCallback"in window?requestIdleCallback(o):setTimeout(o,100),function(){const e=document.getElementById("year");e&&(e.textContent=(new Date).getFullYear())}()}catch(t){console.error("Error during app initialization:",t)}});
