(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=o(a);fetch(a.href,r)}})();const d="/";window.currentLang="en";const c=["en","fr","de","es","pt","zh","ja"],i="i18n-cache",u=10*60*1e3;function m(t){window.translations=t,document.querySelectorAll("[data-i18n]").forEach(e=>{const o=e.getAttribute("data-i18n"),n=t[o];if(!n)return;/<\/?[a-z][\s\S]*>/i.test(n)||/&[a-z]+;/.test(n)?e.innerHTML=n:e.textContent=n}),document.querySelectorAll("[data-i18n-placeholder]").forEach(e=>{const o=e.getAttribute("data-i18n-placeholder"),n=t[o];n&&e.setAttribute("placeholder",n)})}function f(t){try{const e=sessionStorage.getItem(i);if(!e)return null;const n=JSON.parse(e)[t];return!n||Date.now()-n.timestamp>u?null:n.translations}catch{return null}}function g(t,e){try{const o=sessionStorage.getItem(i),n=o?JSON.parse(o):{};n[t]={timestamp:Date.now(),translations:e},sessionStorage.setItem(i,JSON.stringify(n))}catch(o){console.warn(`Failed to cache translations for "${t}":`,o)}}window.addEventListener("beforeunload",()=>{sessionStorage.removeItem(i)});function h(t){document.querySelectorAll("[data-lang]").forEach(e=>{e.removeAttribute("data-selected"),e.getAttribute("data-lang")===t&&e.setAttribute("data-selected","true")})}async function p(t){try{localStorage.setItem("lang",t),document.documentElement.lang=t;let e=f(t);if(!e){const r=await fetch(`${d}locales/${t}.json`);if(!r.ok)throw new Error(`HTTP ${r.status}`);e=await r.json(),g(t,e)}m(e),window.currentLang=t;const o=document.querySelector("title"),n=o?.getAttribute("data-i18n");o&&(n&&e[n]?o.textContent=e[n]:e["website.title"]&&(document.title=e["website.title"]));const a=new URL(window.location);a.searchParams.set("lang",t),window.history.replaceState({},"",a),h(t)}catch(e){console.error(`Failed to load ${t} translations:`,e)}}async function y(){document.documentElement.setAttribute("data-loading","");const e=new URLSearchParams(window.location.search).get("lang"),o=localStorage.getItem("lang"),n=c.includes(e)?e:c.includes(o)?o:"en";await p(n),document.documentElement.removeAttribute("data-loading")}function w(){const t=document.querySelector(".hamburger"),e=document.querySelector("nav");!t||!e||t.addEventListener("click",()=>{const o=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!o),t.classList.toggle("active"),e.classList.toggle("active")})}function b(){const t=document.querySelector("header");t&&window.addEventListener("scroll",()=>{window.scrollY>10?t.classList.add("scrolled"):t.classList.remove("scrolled")})}function L(t){const e=document.getElementById("lang-toggle"),o=document.getElementById("lang-menu");!e||!o||(e.addEventListener("click",()=>{const n=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!n),o.hidden=n}),o.querySelectorAll("button").forEach(n=>{n.addEventListener("click",async()=>{const a=n.getAttribute("data-lang");a&&await t(a),e.setAttribute("aria-expanded","false"),o.hidden=!0})}),document.addEventListener("click",n=>{!e.contains(n.target)&&!o.contains(n.target)&&(e.setAttribute("aria-expanded","false"),o.hidden=!0)}))}function A(){const t=document.getElementById("theme-toggle");if(!t)return;const e=t.querySelector(".icon-sun"),o=t.querySelector(".icon-moon");function n(r){!e||!o||(r==="dark"?(e.style.display="block",o.style.display="none",t.setAttribute("aria-pressed","true")):(e.style.display="none",o.style.display="block",t.setAttribute("aria-pressed","false")))}const a=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",a),n(a),t.addEventListener("click",()=>{const s=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),n(s)})}async function l(){try{const t=document.getElementById("download-mobile-app");if(!t)return;const o=`https://raw.githubusercontent.com/aelassas/movinin/main/.github/latest-release.json?t=${Date.now()}`,n=await fetch(o);if(!n.ok)throw new Error(`Failed to fetch latest release info: ${n.status} ${n.statusText}`);const a=await n.json();if(t.href===a.latestApkUrl)return;a.latestApkUrl&&(t.href=a.latestApkUrl)}catch(t){console.error(t);const e=document.getElementById("demo-mobile-app");e&&(e.style.display="none")}}function E(){"requestIdleCallback"in window?requestIdleCallback(l):setTimeout(l,100)}function S(){const t=document.getElementById("year");t&&(t.textContent=new Date().getFullYear())}export{b as a,L as b,A as c,E as d,w as i,y as l,p as s,S as u};
