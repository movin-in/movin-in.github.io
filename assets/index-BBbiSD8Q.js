(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();window.currentLang="en";const l="/",s=["en","fr","es","pt","zh","ja"];function d(e){window.translations=e,document.querySelectorAll("[data-i18n]").forEach(n=>{const o=n.getAttribute("data-i18n");e[o]&&(n.textContent=e[o])}),document.querySelectorAll("[data-i18n-placeholder]").forEach(n=>{const o=n.getAttribute("data-i18n-placeholder"),r=e[o];r&&n.setAttribute("placeholder",r)});const a=localStorage.getItem("lang")||"en";fetch(`${l}locales/${a}.json`).then(n=>n.json()).then(n=>{document.querySelectorAll("[data-i18n]").forEach(o=>{const r=o.getAttribute("data-i18n"),c=n[r];if(!c)return;/<\/?[a-z][\s\S]*>/i.test(c)?o.innerHTML=c:o.textContent=c})}).catch(n=>console.error(`Failed to load ${a} translations`,n))}function u(e){document.querySelectorAll("[data-lang]").forEach(t=>{t.removeAttribute("data-selected"),t.getAttribute("data-lang")===e&&t.setAttribute("data-selected","true")})}async function i(e){try{localStorage.setItem("lang",e),document.documentElement.lang=e;const t=await fetch(`locales/${e}.json`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const a=await t.json();d(a),window.currentLang=e,document.title=a["website.title"]||document.title;const n=new URL(window.location);n.searchParams.set("lang",e),window.history.replaceState({},"",n),u(e)}catch(t){console.error(`Failed to load ${e} translations:`,t)}}async function g(){document.documentElement.setAttribute("data-loading","");const t=new URLSearchParams(window.location.search).get("lang"),a=localStorage.getItem("lang"),n=s.includes(t)?t:s.includes(a)?a:"en";await i(n),document.documentElement.removeAttribute("data-loading")}window.addEventListener("DOMContentLoaded",()=>{const t=new URLSearchParams(window.location.search).get("lang"),a=localStorage.getItem("lang"),n=s.includes(t)?t:s.includes(a)?a:"en";i(n)});function m(){const e=document.querySelector(".hamburger"),t=document.querySelector("nav");!e||!t||e.addEventListener("click",()=>{const a=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!a),e.classList.toggle("active"),t.classList.toggle("active")})}function f(){const e=document.querySelector("header");e&&window.addEventListener("scroll",()=>{window.scrollY>10?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function h(e){const t=document.getElementById("lang-toggle"),a=document.getElementById("lang-menu");!t||!a||(t.addEventListener("click",()=>{const n=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!n),a.hidden=n}),a.querySelectorAll("button").forEach(n=>{n.addEventListener("click",()=>{const o=n.getAttribute("data-lang");o&&e(o),t.setAttribute("aria-expanded","false"),a.hidden=!0})}),document.addEventListener("click",n=>{!t.contains(n.target)&&!a.contains(n.target)&&(t.setAttribute("aria-expanded","false"),a.hidden=!0)}))}function p(){const e=document.getElementById("theme-toggle");if(!e)return;const t=e.querySelector(".icon-sun"),a=e.querySelector(".icon-moon");function n(r){!t||!a||(r==="dark"?(t.style.display="block",a.style.display="none",e.setAttribute("aria-pressed","true")):(t.style.display="none",a.style.display="block",e.setAttribute("aria-pressed","false")))}const o=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",o),n(o),e.addEventListener("click",()=>{const c=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",c),localStorage.setItem("theme",c),n(c)})}async function y(){try{const t=`https://raw.githubusercontent.com/aelassas/movinin/main/.github/latest-release.json?t=${Date.now()}`,a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch latest release info");const n=await a.json(),o=document.getElementById("download-mobile-app");o&&n.latestApkUrl&&(o.href=n.latestApkUrl)}catch(e){console.error(e);const t=document.getElementById("demo-mobile-app");t&&(t.style.display="none")}}function w(){const e=document.getElementById("year");e&&(e.textContent=new Date().getFullYear())}window.addEventListener("DOMContentLoaded",async()=>{try{await g(),m(),f(),h(i),p(),await y(),w()}catch(e){console.error("Error during app initialization:",e)}});
